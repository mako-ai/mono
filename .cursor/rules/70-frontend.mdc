---
globs: app/src/**/*.ts,app/src/**/*.tsx
description: Frontend conventions for Vite + React app
---

# Frontend Guidelines

- Entry: [app/src/main.tsx](mdc:app/src/main.tsx), root app: [app/src/App.tsx](mdc:app/src/App.tsx).
- State: colocate slices in [app/src/store/](mdc:app/src/store/); hooks in [app/src/hooks/](mdc:app/src/hooks/).
- UI: components under [app/src/components/](mdc:app/src/components/); pages under [app/src/pages/](mdc:app/src/pages/).

Dev server:

- Vite runs on port 5173 and proxies `/api` to `http://localhost:8080` (see [app/vite.config.ts](mdc:app/vite.config.ts)).

Rules:

- Avoid prop drilling; introduce context or store slices where needed.
- Keep components small; extract presentational components.
- Do not import from `app/dist/**`.

- API access pattern:
  - All network calls must originate from Zustand stores under `app/src/store/**`.
  - Components, pages, hooks, and contexts must not call `fetch`, `axios`, or `apiClient` directly; they must invoke store methods.
  - Stores must use the centralized `apiClient` (`app/src/lib/api-client.ts`) for all requests. Do not use `fetch` or `axios` directly in stores.
  - Workspace-scoped requests must target `/workspaces/:id/...`; rely on `apiClient` to inject the `x-workspace-id` header.
  - For streaming or unusual endpoints, encapsulate the request in a store helper and return data/streams to components.
  - Centralize error handling in stores; surface simple result types to components.
  - Gate store calls on workspace readiness when applicable (e.g., after workspace context resolves).
